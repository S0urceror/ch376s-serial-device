# file opened: helloworld.asm
 1    0000              CHPUT equ 0A2h
 2    0000
 3    0000              ; Our program!
 4    0000                  org 0D000h
 5    D000              START:
 6    D000 21 10 D0         ld hl, TXT_HELLO1
 7    D003 CD 07 D0         call PRINT
 8    D006              ;    ld hl, TXT_HELLO2
 9    D006              ;    call PRINT
10    D006 C9               ret
11    D007
12    D007              ; PRINT a zero-terminated string in MSX-DOS
13    D007              ; INPUT: HL points to start of string
14    D007              PRINT:
15    D007                  ; Check if the passed HL lies between start and end
16    D007                  ;
17    D007                  ; ASSERT HL>=TXT_ZERO_TERMINATED_START && HL<TXT_ZERO_TERMINATED_END
18    D007 7E               ld a, (hl)
19    D008 A7               and a
20    D009 C8               ret z
21    D00A                  ;
22    D00A CD A2 00         call CHPUT
23    D00D                  ;
24    D00D 23               inc hl
25    D00E 18 F7            jr PRINT
26    D010
27    D010              TXT_ZERO_TERMINATED_START
28    D010 48 65 6C 6C  TXT_HELLO1 DB "Hello MSX!",0
28    D014 6F 20 4D 53
28    D018 58 21 00
29    D01B              ;TXT_HELLO2 DB "\r\nSerial terminal to MSX over USB",0
30    D01B              TXT_ZERO_TERMINATED_END
31    D01B
32    D01B              ;TXT_ERROR  DB 0
33    D01B
# file closed: helloworld.asm
